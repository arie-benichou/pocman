/*
 * Copyright 2012 Arie Benichou
 * 
 * This program is free software: you can redistribute it and/or modify it under
 * the terms of the GNU General Public License as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option) any later
 * version.
 * 
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU General Public License along with
 * this program. If not, see <http://www.gnu.org/licenses/>.
 */

package pocman.view;

import static org.junit.Assert.assertTrue;

import org.junit.Assert;
import org.junit.Test;

import pocman.maze.Maze;
import pocman.maze.MazeAsBoard;
import pocman.view.MazeAsBoardView;


public class MazeAsBoardViewTest {

    private final static Maze MAZE = new Maze("" +
            "┃⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛┃" +
            "┃∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙┃" +
            "┃⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛∙┃∙⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛┃" +
            "┃∙∙∙∙∙∙∙∙∙∙∙∙┃∙∙∙∙∙∙∙∙∙∙∙∙┃" +
            "┃⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛┃" +
            "┃∙∙∙∙∙∙∙∙∙∙∙∙┃∙∙∙∙∙∙∙∙∙∙∙∙┃" +
            "┃⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛∙┃∙⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛┃" +
            "┃∙∙∙∙∙∙∙∙∙∙∙∙┃∙∙∙∙∙∙∙∙∙∙∙∙┃" +
            "┃⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛┃" +
            "┃∙∙∙∙∙∙∙∙∙∙∙∙┃∙∙∙∙∙∙∙∙∙∙∙∙┃" +
            "┃⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛∙┃∙⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛┃" +
            "┃∙∙∙∙∙∙∙∙∙∙∙∙┃∙∙∙∙∙∙∙∙∙∙∙∙┃" +
            "┃⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛┃" +
            "┃∙∙∙∙∙∙∙∙∙∙∙∙┃∙∙∙∙∙∙∙∙∙∙∙∙┃" +
            "┃⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛∙┃∙⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛┃" +
            "┃∙∙∙∙∙∙∙∙∙∙∙∙┃∙∙∙∙∙∙∙∙∙∙∙∙┃" +
            "┃⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛∙⬛⬛⬛⬛⬛┃" +
            "┃∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙∙┃" +
            "┃⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛⬛┃");

    @Test(expected = IllegalArgumentException.class)
    public void testRenderWithNullReference() {
        final Maze maze = null;
        new MazeAsBoardView().render(maze);
    }

    @Test(expected = IllegalArgumentException.class)
    public void testRenderMazeAsBoardIntWithNullReference() {
        new MazeAsBoardView().render(null, 1);
    }

    @Test(expected = IllegalArgumentException.class)
    public void testRenderMazeAsBoardIntWithIllegalNodeId1() {
        final int nodeId = -1;
        new MazeAsBoardView().render(MAZE, nodeId);
    }

    @Test(expected = IllegalArgumentException.class)
    public void testRenderMazeAsBoardIntWithIllegalNodeId2() {
        final int nodeId = MazeAsBoard.SIZE;
        new MazeAsBoardView().render(MAZE, nodeId);
    }

    @Test
    public void testRender() {
        final MazeAsBoardView boardView = new MazeAsBoardView();
        final String rendering = boardView.render(MAZE);
        Assert.assertTrue(new String(MAZE.toCharArray()).equals(rendering.replaceAll("\n", "")));
    }

    @Test
    public void testRenderMazeAsBoardInt() {
        final int nodeId = MazeAsBoard.SIZE - 1;
        final MazeAsBoardView view = new MazeAsBoardView();
        final String rendering = view.render(MAZE, nodeId);
        System.out.println(rendering);
        final char[] charArray = MAZE.toCharArray();
        charArray[nodeId] = MazeAsBoardView.YOUR_ARE_HERE;
        assertTrue((nodeId + new String(charArray)).equals(rendering.replaceAll("\n", "")));
    }

}